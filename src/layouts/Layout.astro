---
import "@/styles/globals.css"
import { Button } from "@/components/ui/button"
import { Header } from "@/components/Header"
import ApiTokenMissingCard from "@/components/admin/api-token-missing-card"

const currentPath = Astro.url.pathname
const title = Astro.props.title || "SaaS Admin Template"
const { API_TOKEN } = Astro.locals.runtime.env
const apiTokenSet = API_TOKEN && API_TOKEN !== ""
---

<script is:inline>
  // Force dark theme for the green gradient design
  document.documentElement.classList.add("dark")

  if (typeof localStorage !== "undefined") {
    localStorage.setItem("theme", "dark")

    const observer = new MutationObserver(() => {
      const isDark = document.documentElement.classList.contains("dark")
      localStorage.setItem("theme", isDark ? "dark" : "light")
    })
    observer.observe(document.documentElement, {
      attributes: true,
      attributeFilter: ["class"],
    })
  }
</script>

<html lang='en' class='dark'>
  <head>
    <meta charset='UTF-8' />
    <meta name='viewport' content='width=device-width' />
    <link rel='icon' type='image/svg+xml' href='/favicon.svg' />
    <meta name='generator' content={Astro.generator} />
    <title>
      {title ? `${title} - SaaS Admin Template` : "SaaS Admin Template"}
    </title>
  </head>
  <body class='min-h-screen'>
    <Header currentPath={currentPath} />
    <div class='container mx-auto p-8'>
      <div class='glass-card p-8 max-w-6xl mx-auto'>
        {
          !apiTokenSet && (
            <div class='mb-6'>
              <ApiTokenMissingCard />
            </div>
          )
        }
        <div class='flex items-center justify-between mb-8'>
          <div class='flex items-center gap-4'>
            <div
              class='h-12 w-12 rounded-2xl border-4 border-emerald-500 bg-gradient-to-br from-emerald-400 to-emerald-600 shadow-lg flex items-center justify-center emerald-glow'
            >
              <span class='text-white font-bold text-xl'>S</span>
            </div>
            <div>
              <h1 class='text-xl font-medium text-emerald-200'>Travel Agent</h1>
              <h2 class='text-3xl font-medium text-white'>
                An efficient tool to <span class='emerald-accent'>manage</span> your
                <span class='emerald-accent'>incentive program</span>
              </h2>
            </div>
          </div>
          <slot name='actions' />
        </div>
        <div class='space-y-6'>
          <slot />
        </div>
      </div>
    </div>
  </body>
</html>
